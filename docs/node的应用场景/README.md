# Node 的应用场景

## I/O 密集型

Node 面向网络并且擅长并行 I/O，能够有效组织起更多的硬件资源，从而提供更多的服务。

I/O 密集的优势主要在 Node 利用事件循环的能力，而不是启动每一个线程为每一个请求服务，资源占用极少。

## CPU 密集型任务

CPU 密集型应用给 Node 带来的挑战主要是：由于 JavaScript 单线程的原因，如果有长时间运行的计算（比如大循环），将导致 CPU 时间片不能释放，使得后续 I/O 无法发起。

解决方案是适当调整和分解大型运算任务为多个小任务，使得运算能够适时释放，不阻塞 I/O 调用的发起。

这样既能同时享受到并行异步 I/O 的好处，又能充分利用 CPU。

举例来说，如果是一个纯计算的场景，根本没有 I/O，此类应用场景或许应该采用多线程的方式进行计算。Node 虽然没有提供多线程用于计算，但有以下两个方式来充分利用 CPU：

+   通过编写 C/C++ 扩展的方式更搞笑地利用 CPU,将一些 V8不能做到性能极致的地方通过 C/C++ 来实现
+   如果单线程的 Node 不能满足需求，甚至用了 C/C++ 扩展后还觉得不够，那么通过子进程的方式，将一部分 Node 进程当做常驻服务进程用于计算，然后用进程间的通信来传递结果，将计算与 I/O 分离，这样可以充分利用多 CPU。

**CPU 密集不可怕，如何合理调度是诀窍**